<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Counter View</title>
</head>

<body>
    <!-- ========= -->
    <!-- Your HTML -->
    <!-- ========= -->
    <div class="section">
        <div class="container">
            <h1 class="title">Counter</h1>
        </div>
    </div>
    <!-- ========= -->
    <!-- Libraries -->
    <!-- ========= -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <!-- =============== -->
    <!-- Javascript code -->
    <!-- =============== -->
    <script type="text/javascript">
        // your JS code goes here   

        // create the model
        // BandMember = Backbone.Model.extend({});
        BillItem = Backbone.Model.extend({});
        

        // create the collection
        // BandMembers = Backbone.Collection.extend({
        //     model: BandMember
        // });

        Bills = Backbone.Collection.extend({
            model: BillItem
        });

        // populate the collection
        var bandMembers = new BandMembers([
            { name: 'Paul' },
            { name: 'George' },
        ]);
        console.log(bandMembers.toJSON());

        var bills = new Bills([
            { 
                order_no: '101',
                order_items: [
                    'item 1',
                    'item 2',
                    'item 3',
                    'item 4',
                ],
                order 

            }
        ])


        // create a model view for each band member
        BandMemberView = Backbone.View.extend({
            tagName: 'li',
            model: new BandMember(),
            render: function () {
                // add the name to the list item
                this.$el.html(this.model.get('name'));
                // append the new list item to the list in the parent view
                this.parentView.$el.append(this.$el);
                return this;
            }
        });

        // create a collection view for the band members
        BandMembersView = Backbone.View.extend({
            el: '#band',
            initialize: function () {
                // share the "this" context with the render function 
                _.bindAll(this, 'render');

                // add various events for the collection
                this.collection.on('change', this.render);
                this.collection.on('add', this.render);
                this.collection.on('remove', this.render);

                // render the initial state
                this.render();
            },

            render: function () {
                // empty out the view element
                this.$el.empty();

                // cache this before entering the loop
                var thisView = this;

                // loop through all of the items in the collection, creating a 
                // view for each
                this.collection.each(function (oneBandMember) {
                    var bandMemberView = new BandMemberView({
                        model: oneBandMember
                    });

                    // save a reference to this view within the child view
                    bandMemberView.parentView = thisView;

                    // render it
                    bandMemberView.render();
                });

                return this;
            }
        });

        // create a new instance of the band view
        var bandMembersView = new BandMembersView({
            collection: bandMembers
        });

        //add your test case here
        var model1 = new BandMember({});
        model1.set({ name: 'Ringo' });
        bandMembers.add(model1);

        var model2 = new BandMember({});
        model2.set({ name: 'John' });
        bandMembers.add(model2);

        // bandMembers.findWhere({name: 'John'}).destroy();
        var model3 = bandMembers.at(3);
        model3.set({ name: 'Dead' });

    </script>

</body>

</html>