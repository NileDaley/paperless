<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Admin</title>
</head>

<body>
    <div class="section">
        <div class="container">
            <h1 class="title">
                Admin Page
            </h1>
            <div class="food">
                loading...
            </div>
        </div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">

    <!-- =============== -->
    <!-- Javascript code -->
    <!-- =============== -->
    <script type="text/javascript">

        // create the model
        MenuItem = Backbone.Model.extend({});

        // create the collection
        MenuItems = Backbone.Collection.extend({
            model: MenuItem
        });

        // populate the collection
        var menuItems = new MenuItems([
            { name: 'Chicken sour' },
            { name: 'noodle' },
        ]);
        console.log(menuItems.toJSON());


        // create a model view for each band member
        MenuItemView = Backbone.View.extend({
            tagName: 'li',
            model: new MenuItem(),
            render: function () {
                // add the name to the list item  
                this.$el.html(this.model.get('name'));
                // append the new list item to the list in the parent view 
                this.parentView.$el.append(this.$el);
                return this;
            }
        });

        // create a collection view for the band members
        MenuItemsView = Backbone.View.extend({
            el: '#food',
            initialize: function () {
                // share the "this" context with the render function 
                _.bindAll(this, 'render');
                // add various events for the collection
                this.collection.on('change', this.render);
                this.collection.on('add', this.render);
                this.collection.on('remove', this.render);
                //         // render the initial state
                this.render();
            },

            render: function () {
                // empty out the view element
                this.$el.empty();

                // cache this before entering the loop
                var thisView = this;

                // loop through all of the items in the collection, creating a 
                // view for each
                this.collection.each(function (oneFoodItem) {
                    var MenuItemView = new MenuItemView({
                        model: oneFoodItem
                    });

                    // save a reference to this view within the child view
                    MenuItemView.parentView = thisView;

                    // render it
                    MenuItemView.render();
                });

                return this;
            }
        });

        // create a new instance of the band view
        var MenuItemView = new MenuItemView({
            collection: menuItems
        });

        //add your test case here
        //add
        var model = new MenuItem({});
        model.set({ name: 'Chicken Sour' });
        menuItems.add(model);

        //remove
        menuItems.findWhere({ name: 'Noodle' }).destroy();

        //change or update
        var model = menuItems.at(1);
        model.set({ name: 'Sweet sour' });


        // var foodItems = [
        //     {
        //         "item_id": "101",
        //         "item_name": "food 1",
        //         "item_price": "1.99"
        //     },
        //     {
        //         "item_id": "102",
        //         "item_name": "food 2",
        //         "item_price": "2.99"
        //     },
        //     {
        //         "item_id": "103",
        //         "item_name": "food 3",
        //         "item_price": "3.99"
        //     },
        //     {
        //         "item_id": "104",
        //         "item_name": "food 4",
        //         "item_price": "4.99"
        //     },
        //     {
        //         "item_id": "105",
        //         "item_name": "food 5",
        //         "item_price": "5.99"
        //     }
        // ];

        // for (var i = 0; i < foodItems.length; i++) {
        //     var obj = foodItems[i];

        //     console.log(obj.item_id);
        //     // console.log(obj.item_name);
        // }


    </script>

</body>

</html>